"""AI 프롬프트 템플릿 모듈"""

# 제목 공식 10가지
TITLE_FORMULAS = """
## 제목 공식 10가지

1. **숫자 + 키워드 + 결과**: [숫자] + [방법/비밀/법칙] + [원하는 결과]
   예: 3개월 만에 책 쓰는 비밀

2. **타겟 + 문제해결**: [특정 타겟]을 위한 + [문제 해결책]
   예: 바쁜 직장인을 위한 5분 독서법

3. **Before → After 변화**: [현재 상태]에서 [원하는 상태]로
   예: 월급쟁이에서 건물주로

4. **질문형**: [타겟의 고민]을 질문으로 던지기
   예: 왜 나는 항상 돈이 없을까?

5. **대비/반전**: [상반된 개념 A] vs [상반된 개념 B]
   예: 1%가 아는 것, 99%가 모르는 것

6. **권위/신뢰**: [권위자/기관]이 알려주는 + [핵심 내용]
   예: 30년 편집자가 공개하는 출판의 비밀

7. **시간 제한**: [짧은 시간] 안에 + [성과]
   예: 하루 10분, 기적의 아침습관

8. **비밀/공개**: [누군가]만 아는 + [비밀/노하우]
   예: 부자들만 아는 세금의 비밀

9. **스토리텔링**: [주인공]의 + [여정/이야기]
   예: 29살, 나는 사장이 되기로 했다

10. **명령/행동 유도**: [행동]하라/해라 + [이유/결과]
    예: 생각을 멈추고 일단 써라
"""


def get_title_generation_prompt(book_info: dict) -> str:
    """제목 생성 프롬프트"""
    return f"""내 책 정보:
- 주제: {book_info.get('topic', '')}
- 타겟 독자: {book_info.get('target_reader', '')}
- 핵심 메시지: {book_info.get('core_message', '')}
- 내 경험/스토리: {book_info.get('experience', '')}

{TITLE_FORMULAS}

위 제목 공식 10가지를 각각 적용해서 책 제목 10개를 만들어주세요.

각 제목에 대해:
1. 적용한 공식 번호와 이름
2. 제목
3. 이 제목의 장점 (한 줄)
4. 부제목 제안 (선택)

형식으로 출력해주세요. 마크다운 형식으로 깔끔하게 정리해주세요."""


def get_toc_generation_prompt(book_info: dict) -> str:
    """목차 생성 프롬프트 (5부 구조, 40꼭지)"""
    return f"""내 책 정보:
- 제목: {book_info.get('title', '')}
- 주제: {book_info.get('topic', '')}
- 타겟 독자: {book_info.get('target_reader', '')}
- 핵심 메시지: {book_info.get('core_message', '')}

5부 구조(Why-What-How-Do-Future)로 목차를 만들어주세요.

## 5부 구조 설명:
- Part 1. WHY (왜?): 문제 인식 & 동기 부여 - 독자가 "이 책 꼭 읽어야겠다"고 느끼게
- Part 2. WHAT (무엇?): 핵심 개념 & 원리 - 기본 개념을 완벽히 이해하게
- Part 3. HOW (어떻게?): 구체적 방법론 - "나도 할 수 있겠다"는 자신감
- Part 4. DO (실행): 실전 적용 & 사례 - 실제로 따라하며 결과물
- Part 5. FUTURE (미래): 비전 & 다음 단계 - 책을 덮어도 행동하게

## 요구사항:
1. 각 Part는 8개 꼭지
2. 총 40개 꼭지
3. 각 꼭지는 문장형 제목 (호기심 유발)
4. 논리적 흐름 유지
5. 독자가 읽고 싶어지는 제목

## 출력 형식:
```
Part 1. [Part 제목] - WHY (왜?)
  1-1. [꼭지 제목]
  1-2. [꼭지 제목]
  1-3. [꼭지 제목]
  1-4. [꼭지 제목]
  1-5. [꼭지 제목]
  1-6. [꼭지 제목]
  1-7. [꼭지 제목]
  1-8. [꼭지 제목]

Part 2. [Part 제목] - WHAT (무엇?)
  2-1. [꼭지 제목]
  ...

Part 3. [Part 제목] - HOW (어떻게?)
  3-1. [꼭지 제목]
  ...

Part 4. [Part 제목] - DO (실행)
  4-1. [꼭지 제목]
  ...

Part 5. [Part 제목] - FUTURE (미래)
  5-1. [꼭지 제목]
  ...
```"""


def get_draft_generation_prompt(book_info: dict, section_info: dict) -> str:
    """초안 생성 프롬프트 (2000자)"""
    return f"""내 책 정보:
- 제목: {book_info.get('title', '')}
- 타겟 독자: {book_info.get('target_reader', '')}
- 이 책의 톤: {book_info.get('tone', '친근한')}

지금 쓸 꼭지:
- Part {section_info.get('part_number', '')}: {section_info.get('part_title', '')}
- 꼭지 번호: {section_info.get('section_number', '')}
- 꼭지 제목: {section_info.get('section_title', '')}
- 이 꼭지의 핵심 메시지: {section_info.get('core_message', '꼭지 제목에서 유추')}
- 포함할 사례/데이터: {section_info.get('examples', '적절한 사례 추가')}

## 요구사항:
1. 분량: 2000자 (공백 포함)
2. 구조:
   - 도입 (호기심 유발, 약 300자)
   - 본론 (핵심 내용 3가지, 각 약 400자)
   - 사례/데이터 (설득력, 약 400자)
   - 마무리 (행동 유도, 약 300자)
3. 문장은 짧게 (한 문장 40자 이내)
4. 한 문단은 3-4문장
5. 중간중간 소제목 사용
6. 독자에게 말하듯 (~하세요, ~입니다)

바로 글을 작성해주세요."""


def get_feedback_prompt(content: str, feedback_type: str) -> str:
    """피드백 프롬프트"""
    if feedback_type == "title":
        return f"""내가 만든 책 제목 후보들:
{content}

각 제목을 아래 기준으로 10점 만점 평가해주세요:

평가 기준:
1. 호기심 유발 (클릭하고 싶은가?) - /10점
2. 타겟 명확성 (누구를 위한 책인지 알 수 있는가?) - /10점
3. 차별화 (비슷한 제목의 책이 없는가?) - /10점
4. 기억 용이성 (외우기 쉬운가?) - /10점
5. 검색 가능성 (검색했을 때 나올 키워드가 있는가?) - /10점

총점과 함께 TOP 3를 선정하고, 각각의 개선안을 제시해주세요."""

    elif feedback_type == "toc":
        return f"""내가 만든 목차:
{content}

아래 기준으로 평가하고 개선안을 제시해주세요:

평가 기준:
1. 논리적 흐름 (앞 꼭지가 뒤 꼭지의 기반이 되는가?) - /10점
2. 완결성 (빠진 내용이 없는가?) - /10점
3. 중복 제거 (비슷한 내용이 겹치지 않는가?) - /10점
4. 호기심 유발 (목차만 봐도 읽고 싶은가?) - /10점
5. 실용성 (독자가 실제로 써먹을 수 있는가?) - /10점

총점과 함께:
- 삭제해야 할 꼭지
- 추가해야 할 꼭지
- 순서 변경이 필요한 꼭지
- 제목 수정이 필요한 꼭지

구체적으로 알려주세요."""

    else:  # draft
        return f"""아래 원고를 평가해주세요:

{content}

평가 기준:
1. 논리적 흐름 (10점)
2. 가독성 (10점)
3. 설득력 (10점)
4. 차별화 (10점)
5. 완성도 (10점)

각 기준별 점수와 함께:
- 잘된 점 3가지
- 개선할 점 3가지
- 구체적 수정 제안 (어떤 부분을 어떻게)

를 알려주세요. 가장 시급하게 고쳐야 할 1가지도 명시해주세요."""


def get_refine_prompt(text: str) -> str:
    """문장 다듬기 프롬프트"""
    return f"""아래 글을 다듬어주세요:

{text}

수정 기준:
1. 어색한 표현 → 자연스러운 한국어로
2. 긴 문장 → 2개로 나누기
3. 반복되는 단어 → 동의어로 교체
4. 딱딱한 표현 → 친근한 표현으로
5. 수동태 → 능동태로
6. 한자어 과다 → 쉬운 말로

출력 형식:
[수정된 글]

---
[수정 내역]
- 원문: "~" → 수정: "~" (이유: ~)"""


def get_storytelling_prompt(experience: str) -> str:
    """스토리텔링 프롬프트"""
    return f"""내 경험 원본:
{experience}

이 경험을 아래 구조로 스토리텔링해주세요:

1. 상황 (Before): 당시 나의 상태, 감정, 환경
2. 문제 (Conflict): 겪은 어려움, 고민
3. 전환점 (Turning Point): 깨달음의 순간
4. 행동 (Action): 무엇을 했는지
5. 결과 (After): 변화된 모습
6. 교훈 (Lesson): 독자가 얻을 인사이트

분량: 800-1000자
톤: 담담하지만 진정성 있게

출력 형식:
[스토리 제목]
[본문]
[핵심 교훈 한 줄]"""


# 글쓰기 톤 옵션
WRITING_TONES = [
    "친근한 (독자와 대화하듯)",
    "전문적인 (신뢰감 있는)",
    "유머러스한 (재미있고 가벼운)",
    "감성적인 (감동을 주는)",
    "실용적인 (바로 적용 가능한)",
]


def get_proposal_generation_prompt(book_info: dict, author_info: dict) -> str:
    """출간기획서 생성 프롬프트"""
    return f"""내 책 정보:
- 제목: {book_info.get('title', '')}
- 주제: {book_info.get('topic', '')}
- 타겟 독자: {book_info.get('target_reader', '')}
- 핵심 메시지: {book_info.get('core_message', '')}

저자 정보:
- 이름: {author_info.get('name', '')}
- 직업/전문 분야: {author_info.get('profession', '')}
- 경력/전문성: {author_info.get('career', '')}
- 대표 성과: {author_info.get('achievements', '')}
- SNS/블로그: {author_info.get('sns', '')}
- 연락처: {author_info.get('contact', '')}

## 기획서 7가지 구성 요소를 모두 포함해서 작성해주세요:

1. **제목 & 부제목**: 임팩트 있는 제목과 구체적 부제목
2. **기획 의도**: 이 책이 왜 필요한지, 왜 내가 쓸 수 있는지 (3문장)
3. **타겟 독자**: 주 타겟, 부 타겟, 예상 시장 규모
4. **시장 분석**: 유사 도서 3권과의 차별점, USP
5. **목차 요약**: 5부 구조 간략 소개
6. **저자 소개**: 신뢰도를 높이는 경력/전문성
7. **마케팅 계획**: 보유 채널, 출간 전후 홍보 계획

## 요구사항:
1. A4 2페이지 분량으로 간결하게
2. 출판사 편집자가 5분 안에 읽을 수 있도록
3. 구체적인 숫자 포함 (예상 판매량, 타겟 규모 등)
4. 차별점과 시장성 강조

출판사 편집자가 "이 책 출판하고 싶다"고 느낄 수 있도록 작성해주세요."""


def get_landing_page_prompt(book_info: dict, webinar_info: dict) -> str:
    """랜딩페이지 카피 생성 프롬프트"""
    return f"""책/웨비나 정보:
- 책 제목: {book_info.get('title', '')}
- 주제: {book_info.get('topic', '')}
- 타겟 독자: {book_info.get('target_reader', '')}
- 핵심 메시지: {book_info.get('core_message', '')}

웨비나/이벤트 정보:
- 웨비나 제목: {webinar_info.get('webinar_title', '')}
- 일시: {webinar_info.get('datetime', '')}
- 강사: {webinar_info.get('speaker', '')}
- 주요 내용: {webinar_info.get('content', '')}
- 보너스/혜택: {webinar_info.get('bonus', '')}

## 랜딩페이지 10개 섹션 카피를 작성해주세요:

1. **헤더 (Hero)**: 3초 안에 시선 강탈 (A/B/C 3가지 버전)
2. **문제 제기**: "나도 이런 고민..." 공감 형성
3. **해결책 제시**: 웨비나에서 알려줄 3가지
4. **강사 소개**: 신뢰 구축
5. **커리큘럼**: 90분 타임테이블
6. **사회적 증거**: 후기/성과 데이터
7. **보너스/혜택**: 참석자 선물
8. **CTA (신청 폼)**: 신청 유도
9. **FAQ**: 자주 묻는 질문 5개
10. **최종 CTA**: 마지막 푸시

## 요구사항:
1. 전환율 30% 이상 목표
2. 긴급성/희소성 요소 포함
3. CTA 버튼 문구 5가지 버전
4. 타겟의 언어로 (전문 용어 최소화)
5. 마크다운 형식으로 깔끔하게

신청하고 싶어지는 카피를 작성해주세요."""
